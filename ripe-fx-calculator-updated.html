<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ripe FX Calculator - Transparent Stablecoin Conversion</title>
    <style>
        /* ==========================================
           RIPE FX CALCULATOR - WIDGET WITH SIZE CONTROLS
           Small mode: Simplified "Quick Convert" style
           ========================================== */

        :root {
            /* Ripe Brand Colors */
            --ripe-violet-deep: #1a0f3d;
            --ripe-blue-dark: #0f1729;
            --ripe-orange: #f59e0b;
            --ripe-yellow: #fcd34d;
            --ripe-teal: #14b8a6;
            --ripe-white: #ffffff;
            --ripe-gray-50: #f9fafb;
            --ripe-gray-100: #f3f4f6;
            --ripe-gray-200: #e5e7eb;
            --ripe-gray-600: #6b7280;
            --ripe-gray-800: #1f2937;
            --ripe-gray-900: #111827;

            /* Gradients */
            --ripe-gradient-button: linear-gradient(135deg, #fcd34d 0%, #f59e0b 100%);
            --ripe-gradient-success: linear-gradient(135deg, rgba(20, 184, 166, 0.1), rgba(20, 184, 166, 0.05));

            /* Dynamic spacing */
            --space-unit: 1rem;
            --space-sm: calc(var(--space-unit) * 0.5);
            --space-md: var(--space-unit);
            --space-lg: calc(var(--space-unit) * 1.5);
            --space-xl: calc(var(--space-unit) * 2);

            /* Border Radius */
            --radius: 16px;
            --radius-sm: 12px;
            --radius-xs: 8px;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ripe-white: #1f2937;
                --ripe-gray-50: #374151;
                --ripe-gray-100: #4b5563;
                --ripe-gray-900: #f9fafb;
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--ripe-violet-deep) 0%, var(--ripe-blue-dark) 50%, var(--ripe-violet-deep) 100%);
            color: var(--ripe-gray-900);
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        /* Size Control Panel */
        .size-control-panel {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
        }

        .size-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--ripe-gray-800);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .size-buttons {
            display: flex;
            gap: 0.5rem;
            background: var(--ripe-gray-50);
            padding: 4px;
            border-radius: var(--radius-sm);
        }

        .size-btn {
            padding: 8px 20px;
            background: transparent;
            border: none;
            border-radius: var(--radius-xs);
            font-size: 14px;
            font-weight: 600;
            color: var(--ripe-gray-600);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .size-btn:hover {
            color: var(--ripe-gray-900);
            transform: translateY(-1px);
        }

        .size-btn.active {
            background: var(--ripe-gradient-button);
            color: white;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
        }

        .size-indicator {
            margin-left: 1rem;
            padding: 6px 12px;
            background: var(--ripe-gradient-success);
            border: 2px solid rgba(20, 184, 166, 0.3);
            border-radius: var(--radius-xs);
            font-size: 12px;
            font-weight: 600;
            color: var(--ripe-teal);
        }

        /* Widget Container */
        .widget-container {
            width: 100%;
            background: var(--ripe-white);
            border-radius: var(--radius);
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            padding: var(--space-lg);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ==========================================
           SIZE-SPECIFIC MODES
           ========================================== */
        .widget-container.small {
            width: 100%;
            max-width: 360px;
            padding: 1.5rem;
            --space-unit: 0.75rem;
            min-height: 360px;
            box-shadow: 0 18px 40px rgba(0, 0, 0, 0.18);
        }

        .widget-container.small .header {
            margin-bottom: 1.5rem;
        }

        .widget-container.small .logo {
            margin-bottom: 1rem;
        }

        .widget-container.small .logo-icon {
            width: 32px;
            height: 32px;
            font-size: 16px;
            background: #000;
            border-radius: 6px;
        }

        .widget-container.small .logo-text {
            font-size: 20px;
            background: none;
            -webkit-text-fill-color: #000;
            color: #000;
        }

        .widget-container.small .title {
            font-size: 24px;
            font-weight: 700;
            color: #000;
            margin-bottom: 1.5rem;
        }

        .widget-container.small .tagline,
        .widget-container.small .direction-toggle,
        .widget-container.small .preset-buttons,
        .widget-container.small .breakdown-section,
        .widget-container.small .comparison-section,
        .widget-container.small .footer-note {
            display: none;
        }

        .widget-container.small .input-section {
            margin: 0;
        }

        .widget-container.small .input-group {
            margin-bottom: 0.75rem;
            background: var(--ripe-gray-50);
            border-radius: 12px;
            padding: 1rem;
            border: 1px solid var(--ripe-gray-200);
        }

        .widget-container.small .input-label {
            display: none;
        }

        .widget-container.small .input-wrapper {
            gap: 0.75rem;
        }

        .widget-container.small .currency-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 50%;
            font-size: 18px;
        }

        .widget-container.small .input-field {
            background: transparent;
            border: none;
            padding: 0;
            font-size: 20px;
            font-weight: 600;
            color: #000;
            flex: 1;
        }

        .widget-container.small .input-field:focus {
            box-shadow: none;
        }

        .widget-container.small .currency-badge {
            background: transparent;
            padding: 0;
            font-size: 16px;
            font-weight: 600;
            color: #6b7280;
        }

        .widget-container.small .currency-select {
            background: transparent;
            border: none;
            padding: 0;
            font-size: 16px;
            font-weight: 600;
            color: #6b7280;
            min-width: auto;
        }

        .widget-container.small .result-card {
            display: none;
        }

        .widget-container.small .convert-button {
            display: block;
            width: 100%;
            padding: 1rem;
            background: var(--ripe-gradient-button);
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 700;
            color: #000;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 16px rgba(245, 158, 11, 0.3);
            margin-top: 1.5rem;
        }

        .widget-container.small .convert-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .widget-container.small .convert-button:active {
            transform: translateY(0);
        }

        .widget-container.small .output-amount {
            font-size: 14px;
            color: #6b7280;
        }

        .widget-container.small .output-amount strong {
            font-size: 18px;
            color: #000;
            font-weight: 600;
        }

        /* ==========================================
           MEDIUM MODE
           ========================================== */
        .widget-container.medium {
            width: 100%;
            max-width: 920px;
            --space-unit: 0.9rem;
            font-size: 14px;
            display: grid;
            grid-template-columns: 1.15fr 0.85fr;
            gap: 1.5rem;
            align-items: start;
            min-height: 380px;
            padding: 2rem;
        }

        .widget-container.medium .logo-icon {
            width: 36px;
            height: 36px;
            font-size: 18px;
        }

        .widget-container.medium .logo-text {
            font-size: 20px;
        }

        .widget-container.medium .input-field {
            font-size: 18px;
            padding: 12px 14px;
        }

        .widget-container.medium .result-amount {
            font-size: 28px;
        }

        /* ==========================================
           LARGE MODE
           ========================================== */
        .widget-container.large {
            width: 100%;
            max-width: 700px;
            --space-unit: 1rem;
            font-size: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.25rem;
            align-items: stretch;
            min-height: 700px;
        }

        .widget-container.large .logo-icon {
            width: 40px;
            height: 40px;
            font-size: 20px;
        }

        .widget-container.large .logo-text {
            font-size: 24px;
        }

        .widget-container.large .input-field {
            font-size: 20px;
            padding: 14px 16px;
        }

        .widget-container.large .result-amount {
            font-size: 36px;
        }

        /* Convert UI wrapper */
        .convert-ui {
            display: block;
            overflow-y: auto;
            height: 100%;
        }

        .widget-container.medium .convert-ui,
        .widget-container.large .convert-ui {
            display: block;
        }

        .card-visual {
            display: none;
        }

        .widget-container.small .card-visual {
            display: none;
        }

        .widget-container.medium .card-visual,
        .widget-container.large .card-visual {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            background: #0f111d;
            border-radius: 18px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            color: #e8ecf8;
            box-shadow: 0 18px 50px rgba(0, 0, 0, 0.4);
            height: 100%;
            min-height: 100%;
        }

        .widget-container.medium,
        .widget-container.large {
            background: transparent;
            border: none;
            box-shadow: none;
            position: relative;
            padding: 0;
        }

        .widget-container.medium::before,
        .widget-container.large::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 20px;
            background: radial-gradient(circle at 10% 20%, rgba(46, 70, 255, 0.4), transparent 35%), radial-gradient(circle at 90% 0%, rgba(0, 194, 255, 0.35), transparent 35%), linear-gradient(135deg, rgba(19, 31, 53, 0.6), rgba(8, 15, 26, 0.9));
            filter: blur(1px);
            z-index: -2;
        }

        .widget-container.medium::after,
        .widget-container.large::after {
            content: '';
            position: absolute;
            inset: 10px;
            border-radius: 16px;
            background: #0f111d;
            z-index: -1;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
        }

        .card-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .card-bank {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .card-bank .name {
            font-size: 16px;
            font-weight: 700;
            color: #f5f6ff;
        }

        .card-bank .currency {
            font-size: 13px;
            color: #9ca3af;
            letter-spacing: 0.4px;
        }

        .card-action {
            width: 38px;
            height: 38px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: linear-gradient(135deg, #6b8afe, #5f7bff);
            box-shadow: 0 10px 25px rgba(91, 120, 255, 0.45);
            color: #eaf1ff;
            font-weight: 700;
            font-size: 16px;
        }

        .card-balance {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .card-balance .label {
            color: #9ca3af;
            font-size: 13px;
            letter-spacing: 0.3px;
        }

        .card-balance .amount {
            font-size: 34px;
            font-weight: 800;
            color: #f6f7fb;
        }

        .card-chart {
            display: flex;
            align-items: flex-end;
            gap: 14px;
            min-height: 180px;
            padding: 6px 4px 12px 4px;
        }

        .card-bar {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .bar-track {
            width: 12px;
            height: 160px;
            border-radius: 10px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
            position: relative;
            overflow: hidden;
        }

        .bar-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            border-radius: 10px;
            background: linear-gradient(180deg, #5c8bff 0%, #4c7bff 60%, #3b6bff 100%);
            box-shadow: 0 8px 18px rgba(79, 120, 255, 0.35);
            transition: height 0.3s ease;
        }

        .bar-label {
            font-size: 12px;
            color: #aeb7c7;
            letter-spacing: 0.3px;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #e5e7eb;
            font-weight: 600;
            gap: 1rem;
        }

        .card-stat {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .card-stat.up {
            color: #35d89c;
        }

        .card-stat.down {
            color: #f87171;
        }

        /* Header */
        .header {
            margin-bottom: var(--space-lg);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: var(--space-sm);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--ripe-gradient-button);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
            transition: all 0.3s;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: var(--ripe-gradient-button);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all 0.3s;
        }

        .title {
            display: none;
        }

        .widget-container.small .title,
        .widget-container.medium .title {
            display: block;
            font-size: 28px;
            font-weight: 800;
            color: #0b1226;
            margin-bottom: 0.5rem;
        }

        .widget-container.medium .title {
            font-size: 32px;
        }

        .widget-container.small .tagline,
        .widget-container.medium .tagline {
            display: none;
        }

        .tagline {
            font-size: 0.875em;
            color: var(--ripe-gray-600);
            margin-bottom: var(--space-md);
            line-height: 1.4;
        }

        /* Direction Toggle */
        .direction-toggle {
            display: flex;
            background: var(--ripe-gray-50);
            border-radius: var(--radius-sm);
            padding: 4px;
            gap: 4px;
        }

        .direction-btn {
            flex: 1;
            padding: 10px 16px;
            background: transparent;
            border: none;
            border-radius: var(--radius-xs);
            font-size: 0.875em;
            font-weight: 600;
            color: var(--ripe-gray-600);
            cursor: pointer;
            transition: all 0.2s;
        }

        .direction-btn:hover {
            color: var(--ripe-gray-900);
        }

        .direction-btn.active {
            background: white;
            color: var(--ripe-orange);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        /* Input Section */
        .input-section {
            margin: var(--space-lg) 0;
        }

        .input-group {
            margin-bottom: var(--space-md);
        }

        .input-label {
            display: block;
            font-size: 0.8125em;
            font-weight: 600;
            color: var(--ripe-gray-600);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-wrapper {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .currency-icon {
            display: none;
        }

        .input-field {
            flex: 1;
            padding: 14px 16px;
            font-size: 20px;
            font-weight: 700;
            border: 2px solid #e5e7eb;
            border-radius: var(--radius-sm);
            background: white;
            color: var(--ripe-gray-900);
            transition: all 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--ripe-orange);
            box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.1);
        }

        .currency-badge {
            font-size: 1em;
            font-weight: 700;
            color: var(--ripe-gray-900);
            background: var(--ripe-gray-50);
            padding: 8px 12px;
            border-radius: var(--radius-xs);
        }

        .currency-select {
            padding: 14px 16px;
            font-size: 1em;
            font-weight: 600;
            border: 2px solid #e5e7eb;
            border-radius: var(--radius-sm);
            background: white;
            color: var(--ripe-gray-900);
            cursor: pointer;
            min-width: 140px;
            transition: all 0.2s;
        }

        .currency-select:focus {
            outline: none;
            border-color: var(--ripe-orange);
        }

        /* Preset Buttons */
        .preset-buttons {
            display: flex;
            gap: var(--space-sm);
            margin-top: var(--space-sm);
        }

        .preset-btn {
            flex: 1;
            padding: 8px;
            background: var(--ripe-gray-50);
            border: 1px solid #e5e7eb;
            border-radius: var(--radius-xs);
            font-size: 0.875em;
            font-weight: 600;
            color: var(--ripe-gray-900);
            cursor: pointer;
            transition: all 0.2s;
        }

        .preset-btn:hover {
            background: #fef3c7;
            border-color: var(--ripe-yellow);
            color: var(--ripe-orange);
            transform: translateY(-1px);
        }

        /* Convert Button (Small Mode Only) */
        .convert-button {
            display: none;
        }

        /* Result Card */
        .result-card {
            background: var(--ripe-gradient-success);
            border: 2px solid rgba(20, 184, 166, 0.2);
            border-radius: var(--radius);
            padding: var(--space-lg);
            margin: var(--space-lg) 0;
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--ripe-gradient-button);
        }

        .result-headline {
            font-size: 0.8125em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--ripe-gray-600);
            margin-bottom: var(--space-sm);
        }

        .result-amount {
            font-size: 36px;
            font-weight: 800;
            color: var(--ripe-teal);
            margin-bottom: var(--space-sm);
            letter-spacing: -0.5px;
            transition: all 0.3s;
        }

        .result-subtext {
            font-size: 0.875em;
            color: var(--ripe-gray-600);
        }

        /* Breakdown Section */
        .breakdown-section {
            margin-top: var(--space-lg);
        }

        .breakdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .breakdown-title {
            font-size: 1em;
            font-weight: 700;
            color: var(--ripe-gray-900);
        }

        .toggle-details {
            background: none;
            border: none;
            color: var(--ripe-orange);
            font-size: 0.875em;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .toggle-details:hover {
            transform: translateX(2px);
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .breakdown-label {
            font-size: 0.875em;
            color: var(--ripe-gray-900);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .breakdown-value {
            font-size: 0.9375em;
            font-weight: 700;
            color: var(--ripe-gray-900);
        }

        .breakdown-value.negative {
            color: #ef4444;
        }

        .breakdown-value.positive {
            color: var(--ripe-teal);
        }

        /* Info Icon */
        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            background: var(--ripe-gray-600);
            color: white;
            border-radius: 50%;
            font-size: 11px;
            font-weight: 700;
            cursor: help;
            transition: all 0.2s;
        }

        .info-icon:hover {
            background: var(--ripe-orange);
            transform: scale(1.1);
        }

        /* Detail Math */
        .detail-math {
            font-size: 0.75em;
            color: var(--ripe-gray-600);
            background: var(--ripe-gray-50);
            padding: var(--space-md);
            border-radius: var(--radius-sm);
            margin-top: var(--space-md);
            border-left: 3px solid var(--ripe-orange);
            display: none;
            line-height: 1.8;
        }

        .detail-math.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Comparison Section */
        .comparison-section {
            margin-top: var(--space-lg);
            padding-top: var(--space-lg);
            border-top: 2px solid #e5e7eb;
        }

        .comparison-title {
            font-size: 0.9375em;
            font-weight: 700;
            color: var(--ripe-gray-900);
            margin-bottom: var(--space-md);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
        }

        .comparison-card {
            padding: var(--space-md);
            background: var(--ripe-gray-50);
            border-radius: var(--radius-sm);
            border: 2px solid #e5e7eb;
            transition: all 0.2s;
        }

        .comparison-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .comparison-card.ripe {
            background: var(--ripe-gradient-success);
            border-color: rgba(20, 184, 166, 0.3);
        }

        .comparison-label {
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--ripe-gray-600);
            margin-bottom: 6px;
        }

        .comparison-amount {
            font-size: 1.25em;
            font-weight: 800;
            color: var(--ripe-gray-900);
        }

        .comparison-card.ripe .comparison-amount {
            color: var(--ripe-teal);
        }

        .comparison-fees {
            font-size: 0.6875em;
            color: var(--ripe-gray-600);
            margin-top: 4px;
        }

        /* Footer */
        .footer-note {
            margin-top: var(--space-lg);
            padding-top: var(--space-md);
            border-top: 1px solid #e5e7eb;
            font-size: 0.6875em;
            color: var(--ripe-gray-600);
            text-align: center;
        }

        /* Grid Stacking for Medium/Large on smaller screens */
        @media (max-width: 750px) {
            .widget-container.medium,
            .widget-container.large {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .widget-container.medium .card-visual,
            .widget-container.large .card-visual {
                height: 300px;
                min-height: 300px;
            }
        }

        /* Responsive */
        @media (max-width: 600px) {
            body {
                padding: 1rem;
            }

            .size-control-panel {
                flex-direction: column;
                gap: 0.75rem;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Size Control Panel -->
    <div class="size-control-panel">
        <span class="size-label">Widget Size:</span>
        <div class="size-buttons">
            <button class="size-btn active" data-size="small">Small</button>
            <button class="size-btn" data-size="medium">Medium</button>
            <button class="size-btn" data-size="large">Large</button>
        </div>
        <span class="size-indicator" id="sizeIndicator">340px - Mobile Quick Convert</span>
    </div>

    <!-- Widget Container -->
    <div class="widget-container small" id="widgetContainer">
        <div class="convert-ui">
        <div class="header">
            <div class="logo">
                <div class="logo-icon">R</div>
                <div class="logo-text">Ripe</div>
            </div>
            <div class="title">Quick Convert</div>
            <div class="tagline">Transparent stablecoin conversion for Southeast Asia</div>

            <div class="direction-toggle">
                <button class="direction-btn active" id="sendBtn">Send</button>
                <button class="direction-btn" id="receiveBtn">Receive</button>
            </div>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label class="input-label" id="inputLabel">You send</label>
                <div class="input-wrapper">
                    <span class="currency-icon">ðŸ’µ</span>
                    <span class="currency-badge">USDC</span>
                    <input 
                        type="number" 
                        class="input-field" 
                        id="amountInput" 
                        value="100" 
                        min="0.01" 
                        step="0.01"
                        placeholder="100"
                    >
                    <span class="currency-badge">USDC</span>
                </div>
                <div class="preset-buttons">
                    <button class="preset-btn" data-amount="10">10</button>
                    <button class="preset-btn" data-amount="50">50</button>
                    <button class="preset-btn" data-amount="100">100</button>
                    <button class="preset-btn" data-amount="250">250</button>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label" id="outputLabel">Recipient gets</label>
                <div class="input-wrapper">
                    <span class="currency-icon">ðŸ’µ</span>
                    <select class="currency-select" id="currencySelect">
                        <option value="USD">USD</option>
                        <option value="PHP">PHP</option>
                        <option value="THB">THB</option>
                        <option value="IDR">IDR</option>
                        <option value="MYR">MYR</option>
                    </select>
                    <span class="output-amount" id="outputAmount">â‰ˆ <strong>$100.05 USD</strong></span>
                </div>
            </div>
        </div>

        <button class="convert-button" id="convertBtn">
            Convert Now â†’
        </button>

        <div class="result-card">
            <div class="result-headline" id="resultHeadline">Recipient receives</div>
            <div class="result-amount" id="resultAmount">â‚±5,765.00</div>
            <div class="result-subtext" id="resultSubtext">From 100.00 USDC</div>
        </div>

        <div class="breakdown-section">
            <div class="breakdown-header">
                <div class="breakdown-title">Fee Breakdown</div>
                <button class="toggle-details" id="toggleDetails">
                    Show details
                    <span id="detailsArrow">â–¼</span>
                </button>
            </div>

            <div class="breakdown-item">
                <div class="breakdown-label">
                    Gross amount
                    <span class="info-icon" title="Amount before fees at customer rate">i</span>
                </div>
                <div class="breakdown-value" id="grossAmount">â‚±5,850.00</div>
            </div>

            <div class="breakdown-item">
                <div class="breakdown-label">
                    Ripe fee (0.5%)
                    <span class="info-icon" title="Transaction processing fee">i</span>
                </div>
                <div class="breakdown-value negative" id="ripeFee">-â‚±29.25</div>
            </div>

            <div class="breakdown-item">
                <div class="breakdown-label">
                    Network fee
                    <span class="info-icon" title="Blockchain transaction cost">i</span>
                </div>
                <div class="breakdown-value negative" id="networkFee">-â‚±117.00</div>
            </div>

            <div class="breakdown-item">
                <div class="breakdown-label">
                    FX spread (0.85%)
                    <span class="info-icon" title="Difference from interbank rate">i</span>
                </div>
                <div class="breakdown-value" id="fxSpread">Already included</div>
            </div>

            <div class="detail-math" id="detailMath">
                <strong>Detailed Calculation:</strong><br>
                Interbank rate: 1 USDC = <span id="interbankRate">59.00</span> <span id="currencyCode">PHP</span><br>
                Customer rate: 1 USDC = <span id="customerRate">58.50</span> <span id="currencyCode2">PHP</span><br>
                FX spread: <span id="spreadPercent">0.85%</span><br><br>

                <span id="amountValue">100.00</span> USDC Ã— <span id="customerRate2">58.50</span> = <span id="grossValue">5,850.00</span><br>
                Ripe fee: <span id="grossValue2">5,850.00</span> Ã— 0.5% = <span id="ripeFeeValue">29.25</span><br>
                Network fee: ~$2.00 â‰ˆ <span id="networkFeeValue">117.00</span><br>
                Net received: <span id="grossValue3">5,850.00</span> - <span id="ripeFeeValue2">29.25</span> - <span id="networkFeeValue2">117.00</span> = <span id="netValue">5,703.75</span>
            </div>
        </div>

        <div class="comparison-section">
            <div class="comparison-title">Compare with traditional providers</div>
            <div class="comparison-grid">
                <div class="comparison-card">
                    <div class="comparison-label">Legacy Provider</div>
                    <div class="comparison-amount" id="legacyAmount">â‚±5,400.00</div>
                    <div class="comparison-fees">~8% in hidden fees</div>
                </div>
                <div class="comparison-card ripe">
                    <div class="comparison-label">Ripe</div>
                    <div class="comparison-amount" id="ripeAmount">â‚±5,765.00</div>
                    <div class="comparison-fees">Full transparency</div>
                </div>
            </div>
        </div>

        <div class="footer-note">
            Rates update in real-time. This is a calculator for estimation purposes.
        </div>
        </div>

        <div class="card-visual">
            <div class="card-top">
                <div class="card-bank">
                    <div class="name">Citibank</div>
                    <div class="currency" id="cardCurrency">USD</div>
                </div>
                <div class="card-action">â†»</div>
            </div>

            <div class="card-balance">
                <div class="label">Balance</div>
                <div class="amount" id="cardBalance">$964.45</div>
            </div>

            <div class="card-chart" id="cardChart"></div>

            <div class="card-footer">
                <div class="card-stat up">
                    â†‘ <span id="statUp">$3,455.30</span>
                </div>
                <div class="card-stat down">
                    â†“ <span id="statDown">$2,840.00</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * ==========================================
         * RIPE FX CALCULATOR
         * ==========================================
         */

        // Exchange rate configuration - now includes USD
        const exchangeRates = {
            USD: {
                interbank: 1.00,
                customerRate: 1.0005,
                symbol: '$',
                decimals: 2,
                name: 'USD'
            },
            PHP: {
                interbank: 59.00,
                customerRate: 58.50,
                symbol: 'â‚±',
                decimals: 2,
                name: 'PHP'
            },
            THB: {
                interbank: 36.50,
                customerRate: 36.15,
                symbol: 'à¸¿',
                decimals: 2,
                name: 'THB'
            },
            IDR: {
                interbank: 15800,
                customerRate: 15650,
                symbol: 'Rp',
                decimals: 0,
                name: 'IDR'
            },
            MYR: {
                interbank: 4.70,
                customerRate: 4.66,
                symbol: 'RM',
                decimals: 2,
                name: 'MYR'
            }
        };

        const fees = {
            transactionPercent: 0.005,
            networkFeeUSD: 2.00
        };

        const sizeConfig = {
            small: { width: '350px', height: '350px', description: '350 x 350 - Mobile Quick Convert' },
            medium: { width: '700px', height: '350px', description: '700 x 350 - Dual panel' },
            large: { width: '700px', height: '700px', description: '700 x 700 - Dual panel expanded' }
        };

        let currentDirection = 'send';
        let currentCurrency = 'USD';
        let currentSize = 'small';

        // DOM elements
        const widgetContainer = document.getElementById('widgetContainer');
        const amountInput = document.getElementById('amountInput');
        const currencySelect = document.getElementById('currencySelect');
        const outputAmount = document.getElementById('outputAmount');
        const sendBtn = document.getElementById('sendBtn');
        const receiveBtn = document.getElementById('receiveBtn');
        const toggleDetailsBtn = document.getElementById('toggleDetails');
        const detailMath = document.getElementById('detailMath');
        const sizeButtons = document.querySelectorAll('.size-btn');
        const sizeIndicator = document.getElementById('sizeIndicator');
        const convertBtn = document.getElementById('convertBtn');
        const cardChart = document.getElementById('cardChart');
        const cardBalance = document.getElementById('cardBalance');
        const cardCurrency = document.getElementById('cardCurrency');
        const statUp = document.getElementById('statUp');
        const statDown = document.getElementById('statDown');

        const chartData = {
            labels: ['S', 'S', 'M', 'T', 'W', 'T', 'F'],
            values: [62, 75, 32, 90, 70, 28, 80]
        };

        function formatCurrency(amount, currency) {
            const config = exchangeRates[currency];
            const formatted = amount.toFixed(config.decimals).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return `${config.symbol}${formatted}`;
        }

        function calculateSpreadPercent(currency) {
            const config = exchangeRates[currency];
            const spread = ((config.interbank - config.customerRate) / config.interbank) * 100;
            return spread.toFixed(2);
        }

        function calculateConversion() {
            const currency = currentCurrency;
            const config = exchangeRates[currency];
            const usdcAmount = parseFloat(amountInput.value) || 0;

            const grossFiat = usdcAmount * config.customerRate;
            const ripeFee = grossFiat * fees.transactionPercent;
            const networkFee = fees.networkFeeUSD * config.customerRate;
            const netFiat = grossFiat - ripeFee - networkFee;
            const legacyNet = grossFiat * 0.92;

            // Update output in small mode
            if (outputAmount) {
                outputAmount.innerHTML = `â‰ˆ <strong>${formatCurrency(grossFiat, currency)}</strong>`;
            }

            updateDisplay(usdcAmount, grossFiat, ripeFee, networkFee, netFiat, legacyNet, currency, config);
        }

        function updateDisplay(usdcAmount, grossFiat, ripeFee, networkFee, netFiat, legacyNet, currency, config) {
            document.getElementById('resultAmount').textContent = formatCurrency(netFiat, currency);
            document.getElementById('resultSubtext').textContent = `From ${usdcAmount.toFixed(2)} USDC`;

            document.getElementById('grossAmount').textContent = formatCurrency(grossFiat, currency);
            document.getElementById('ripeFee').textContent = `-${formatCurrency(ripeFee, currency)}`;
            document.getElementById('networkFee').textContent = `-${formatCurrency(networkFee, currency)}`;

            const spreadPercent = calculateSpreadPercent(currency);
            document.getElementById('interbankRate').textContent = config.interbank.toFixed(2);
            document.getElementById('customerRate').textContent = config.customerRate.toFixed(2);
            document.getElementById('customerRate2').textContent = config.customerRate.toFixed(2);
            document.getElementById('spreadPercent').textContent = `${spreadPercent}%`;
            document.getElementById('amountValue').textContent = usdcAmount.toFixed(2);
            document.getElementById('grossValue').textContent = grossFiat.toFixed(2);
            document.getElementById('grossValue2').textContent = grossFiat.toFixed(2);
            document.getElementById('grossValue3').textContent = grossFiat.toFixed(2);
            document.getElementById('ripeFeeValue').textContent = ripeFee.toFixed(2);
            document.getElementById('ripeFeeValue2').textContent = ripeFee.toFixed(2);
            document.getElementById('networkFeeValue').textContent = networkFee.toFixed(2);
            document.getElementById('networkFeeValue2').textContent = networkFee.toFixed(2);
            document.getElementById('netValue').textContent = netFiat.toFixed(2);

            const currencyCodes = document.querySelectorAll('#currencyCode, #currencyCode2');
            currencyCodes.forEach(el => el.textContent = currency);

            document.getElementById('legacyAmount').textContent = formatCurrency(legacyNet, currency);
            document.getElementById('ripeAmount').textContent = formatCurrency(netFiat, currency);

            // Card mode values
            if (cardBalance) {
                cardBalance.textContent = formatCurrency(netFiat, currency);
            }
            if (cardCurrency) {
                cardCurrency.textContent = currency;
            }
            if (statUp && statDown) {
                statUp.textContent = formatCurrency(grossFiat, currency);
                statDown.textContent = formatCurrency(ripeFee + networkFee, currency);
            }
        }

        function changeSize(size) {
            currentSize = size;
            widgetContainer.classList.remove('small', 'medium', 'large');
            widgetContainer.classList.add(size);

            // Styles controlled by CSS classes now
            // widgetContainer.style.maxWidth = sizeConfig[size].width;
            widgetContainer.style.removeProperty('width');
            widgetContainer.style.removeProperty('height');
            widgetContainer.style.removeProperty('max-width');
            widgetContainer.style.removeProperty('min-height');

            sizeButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.size === size);
            });

            sizeIndicator.textContent = sizeConfig[size].description;

            renderChart();
        }

        function renderChart() {
            if (!cardChart) return;
            const maxValue = Math.max(...chartData.values);
            cardChart.innerHTML = '';

            chartData.values.forEach((value, idx) => {
                const bar = document.createElement('div');
                bar.className = 'card-bar';

                const track = document.createElement('div');
                track.className = 'bar-track';

                const fill = document.createElement('div');
                fill.className = 'bar-fill';
                const heightPercent = Math.max(12, (value / maxValue) * 100);
                fill.style.height = `${heightPercent}%`;

                track.appendChild(fill);

                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = chartData.labels[idx];

                bar.appendChild(track);
                bar.appendChild(label);

                cardChart.appendChild(bar);
            });
        }

        // Event Listeners
        amountInput.addEventListener('input', calculateConversion);

        currencySelect.addEventListener('change', (e) => {
            currentCurrency = e.target.value;
            calculateConversion();
        });

        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const amount = parseFloat(e.target.dataset.amount);
                amountInput.value = amount;
                calculateConversion();
            });
        });

        sendBtn.addEventListener('click', () => {
            if (currentDirection !== 'send') {
                currentDirection = 'send';
                sendBtn.classList.add('active');
                receiveBtn.classList.remove('active');
                document.getElementById('inputLabel').textContent = 'You send';
                document.getElementById('outputLabel').textContent = 'Recipient gets';
                document.getElementById('resultHeadline').textContent = 'Recipient receives';
            }
        });

        receiveBtn.addEventListener('click', () => {
            if (currentDirection !== 'receive') {
                currentDirection = 'receive';
                receiveBtn.classList.add('active');
                sendBtn.classList.remove('active');
                document.getElementById('inputLabel').textContent = 'Recipient gets';
                document.getElementById('outputLabel').textContent = 'You send';
                document.getElementById('resultHeadline').textContent = 'You need to send';
            }
        });

        toggleDetailsBtn.addEventListener('click', () => {
            detailMath.classList.toggle('show');
            const isShowing = detailMath.classList.contains('show');
            toggleDetailsBtn.innerHTML = isShowing 
                ? 'Hide details <span>â–²</span>'
                : 'Show details <span>â–¼</span>';
        });

        sizeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                changeSize(btn.dataset.size);
            });
        });

        convertBtn.addEventListener('click', () => {
            alert(`Converting ${amountInput.value} USDC to ${currentCurrency}...\n\nThis would trigger the actual conversion process.`);
        });

        // Initial calculation
        calculateConversion();
        renderChart();
    </script>
</body>
</html>